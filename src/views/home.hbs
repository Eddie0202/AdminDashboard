<div class="layout-wrapper layout-content-navbar">
  <div class="layout-container">
    {{>menu}}
    <div class="layout-page">
    {{>header}}
      <!-- Content wrapper -->
      <div class="content-wrapper">
        <!-- Content -->
        <div class="container-xxl flex-grow-1 container-p-y">
          <div class="row">
            <div class="col-lg-8 mb-4 order-0">
              <div class="card">
                <div class="d-flex align-items-end row">
                  <div class="col-sm-7">
                    <div class="card-body">
                      <h5 class="card-title text-primary">Welcome Back Khoa! 🎉</h5>
                      <p class="mb-4">
                        There are <span class="fw-bold">4</span> new articles waiting for your review. Click here for more detail.
                      </p>

                      <a href="javascript:;" class="btn btn-sm btn-outline-primary">View Details</a>
                    </div>
                  </div>
                  <div class="col-sm-5 text-center text-sm-left">
                    <div class="card-body pb-0 px-0 px-md-4">
                      <img src="../assets/img/illustrations/man-with-laptop-light.png" height="140"
                        alt="View Badge User" data-app-dark-img="illustrations/man-with-laptop-dark.png"
                        data-app-light-img="illustrations/man-with-laptop-light.png">
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 order-1">
              <div class="row">
                <div class="col-lg-6 col-md-12 col-6 mb-4">
                  <div class="card">
                    <div class="card-body">
                      <div class="card-title d-flex align-items-start justify-content-between">
                        <div class="avatar flex-shrink-0">
                          <img src="../assets/img/icons/unicons/chart-success.png" alt="chart success" class="rounded">
                        </div>
                        <div class="dropdown">
                          <button class="btn p-0" type="button" id="cardOpt3" data-bs-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                            <i class="bx bx-dots-vertical-rounded"></i>
                          </button>
                          <div class="dropdown-menu dropdown-menu-end" aria-labelledby="cardOpt3">
                            <a class="dropdown-item" href="javascript:void(0);">View More</a>
                            <a class="dropdown-item" href="javascript:void(0);">Delete</a>
                          </div>
                        </div>
                      </div>
                      <span class="fw-semibold d-block mb-1">Users</span>
                      <h3 class="card-title mb-2">{{userCount}} Users</h3>
                      <small class="text-success fw-semibold"><i class="bx bx-up-arrow-alt"></i> {{newUserCount}} New Users</small>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-md-12 col-6 mb-4">
                  <div class="card">
                    <div class="card-body">
                      <div class="card-title d-flex align-items-start justify-content-between">
                        <div class="avatar flex-shrink-0">
                          <img src="../assets/img/icons/unicons/wallet-info.png" alt="Credit Card" class="rounded">
                        </div>
                        <div class="dropdown">
                          <button class="btn p-0" type="button" id="cardOpt6" data-bs-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                            <i class="bx bx-dots-vertical-rounded"></i>
                          </button>
                          <div class="dropdown-menu dropdown-menu-end" aria-labelledby="cardOpt6">
                            <a class="dropdown-item" href="javascript:void(0);">View More</a>
                            <a class="dropdown-item" href="javascript:void(0);">Delete</a>
                          </div>
                        </div>
                      </div>
                      <span>Posts</span>
                      <h3 class="card-title text-nowrap mb-1">{{totalPostCount}} Posts</h3>
                      <small class="text-success fw-semibold"><i class="bx bx-up-arrow-alt"></i> {{newPostCount}} New Posts</small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <!-- Order Statistics -->
            <div class="col-md-6 col-lg-4 col-xl-4 order-0 mb-4">
              <div class="card h-100">
                <div class="card-header d-flex align-items-center justify-content-between pb-0">
                  <div class="card-title mb-0">
                    <h5 class="m-0 me-2">Wastes Statistics</h5>
                    <small class="text-success fw-semibold"><i class="bx bx-up-arrow-alt"></i> {{newWasteCount}} New Wastes Uploaded Today</small>
                  </div>
                  <div class="dropdown">
                    <button class="btn p-0" type="button" id="orederStatistics" data-bs-toggle="dropdown"
                      aria-haspopup="true" aria-expanded="false">
                      <i class="bx bx-dots-vertical-rounded"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end" aria-labelledby="orederStatistics">
                      <a class="dropdown-item" href="javascript:void(0);">Select All</a>
                      <a class="dropdown-item" href="javascript:void(0);">Refresh</a>
                      <a class="dropdown-item" href="javascript:void(0);">Share</a>
                    </div>
                  </div>
                </div>
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-center mb-3" style="position: relative;">
                    {{!-- <div class="d-flex flex-column align-items-center gap-1">
                      <h2 class="mb-2">{{totalCount}}</h2>
                      <span>Total Waste Have Been Uploaded</span>
                    </div> --}}
                    {{!-- <div id="orderStatisticsChart" style="min-height: 137.55px;" >
                      <div id="apexchartswtd67wa" class="apexcharts-canvas apexchartswtd67wa apexcharts-theme-light"
                        style="width: 130px; height: 137.55px;"><svg id="SvgjsSvg2846" width="130" height="137.55"
                          xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink"
                          xmlns:svgjs="http://svgjs.dev" class="apexcharts-svg" xmlns:data="ApexChartsNS"
                          transform="translate(0, 0)" style="background: transparent;">
                          <g id="SvgjsG2848" class="apexcharts-inner apexcharts-graphical" transform="translate(-7, 0)">
                            <defs id="SvgjsDefs2847">
                              <clipPath id="gridRectMaskwtd67wa">
                                <rect id="SvgjsRect2850" width="150" height="173" x="-4.5" y="-2.5" rx="0" ry="0"
                                  opacity="1" stroke-width="0" stroke="none" stroke-dasharray="0" fill="#fff"></rect>
                              </clipPath>
                              <clipPath id="forecastMaskwtd67wa"></clipPath>
                              <clipPath id="nonForecastMaskwtd67wa"></clipPath>
                              <clipPath id="gridRectMarkerMaskwtd67wa">
                                <rect id="SvgjsRect2851" width="145" height="172" x="-2" y="-2" rx="0" ry="0"
                                  opacity="1" stroke-width="0" stroke="none" stroke-dasharray="0" fill="#fff"></rect>
                              </clipPath>
                            </defs>
                            <g id="SvgjsG2852" class="apexcharts-pie">
                              <g id="SvgjsG2853" transform="translate(0, 0) scale(1)">
                                <circle id="SvgjsCircle2854" r="44.835365853658544" cx="70.5" cy="70.5"
                                  fill="transparent">
                                </circle>
                                <g id="SvgjsG2855" class="apexcharts-slices">
                                  <g id="SvgjsG2856" class="apexcharts-series apexcharts-pie-series"
                                    seriesName="Electronic" rel="1" data:realIndex="0">
                                    <path id="SvgjsPath2857"
                                      d="M 70.5 10.71951219512195 A 59.78048780487805 59.78048780487805 0 0 1 97.63977353321047 123.7648046533095 L 90.85483014990785 110.44860348998213 A 44.835365853658544 44.835365853658544 0 0 0 70.5 25.664634146341456 L 70.5 10.71951219512195 z"
                                      fill="rgba(105,108,255,1)" fill-opacity="1" stroke-opacity="1"
                                      stroke-linecap="butt" stroke-width="5" stroke-dasharray="0"
                                      class="apexcharts-pie-area apexcharts-donut-slice-0" index="0" j="0"
                                      data:angle="153" data:startAngle="0" data:strokeWidth="5" data:value="85"
                                      data:pathOrig="M 70.5 10.71951219512195 A 59.78048780487805 59.78048780487805 0 0 1 97.63977353321047 123.7648046533095 L 90.85483014990785 110.44860348998213 A 44.835365853658544 44.835365853658544 0 0 0 70.5 25.664634146341456 L 70.5 10.71951219512195 z"
                                      stroke="#ffffff"></path>
                                  </g>
                                  <g id="SvgjsG2858" class="apexcharts-series apexcharts-pie-series" seriesName="Sports"
                                    rel="2" data:realIndex="1">
                                    <path id="SvgjsPath2859"
                                      d="M 97.63977353321047 123.7648046533095 A 59.78048780487805 59.78048780487805 0 0 1 70.5 130.28048780487805 L 70.5 115.33536585365854 A 44.835365853658544 44.835365853658544 0 0 0 90.85483014990785 110.44860348998213 L 97.63977353321047 123.7648046533095 z"
                                      fill="rgba(133,146,163,1)" fill-opacity="1" stroke-opacity="1"
                                      stroke-linecap="butt" stroke-width="5" stroke-dasharray="0"
                                      class="apexcharts-pie-area apexcharts-donut-slice-1" index="0" j="1"
                                      data:angle="27" data:startAngle="153" data:strokeWidth="5" data:value="15"
                                      data:pathOrig="M 97.63977353321047 123.7648046533095 A 59.78048780487805 59.78048780487805 0 0 1 70.5 130.28048780487805 L 70.5 115.33536585365854 A 44.835365853658544 44.835365853658544 0 0 0 90.85483014990785 110.44860348998213 L 97.63977353321047 123.7648046533095 z"
                                      stroke="#ffffff"></path>
                                  </g>
                                  <g id="SvgjsG2860" class="apexcharts-series apexcharts-pie-series" seriesName="Decor"
                                    rel="3" data:realIndex="2">
                                    <path id="SvgjsPath2861"
                                      d="M 70.5 130.28048780487805 A 59.78048780487805 59.78048780487805 0 0 1 10.71951219512195 70.50000000000001 L 25.664634146341456 70.5 A 44.835365853658544 44.835365853658544 0 0 0 70.5 115.33536585365854 L 70.5 130.28048780487805 z"
                                      fill="rgba(3,195,236,1)" fill-opacity="1" stroke-opacity="1" stroke-linecap="butt"
                                      stroke-width="5" stroke-dasharray="0"
                                      class="apexcharts-pie-area apexcharts-donut-slice-2" index="0" j="2"
                                      data:angle="90" data:startAngle="180" data:strokeWidth="5" data:value="50"
                                      data:pathOrig="M 70.5 130.28048780487805 A 59.78048780487805 59.78048780487805 0 0 1 10.71951219512195 70.50000000000001 L 25.664634146341456 70.5 A 44.835365853658544 44.835365853658544 0 0 0 70.5 115.33536585365854 L 70.5 130.28048780487805 z"
                                      stroke="#ffffff"></path>
                                  </g>
                                  <g id="SvgjsG2862" class="apexcharts-series apexcharts-pie-series"
                                    seriesName="Fashion" rel="4" data:realIndex="3">
                                    <path id="SvgjsPath2863"
                                      d="M 10.71951219512195 70.50000000000001 A 59.78048780487805 59.78048780487805 0 0 1 70.48956633664653 10.719513105630845 L 70.4921747524849 25.664634829223125 A 44.835365853658544 44.835365853658544 0 0 0 25.664634146341456 70.5 L 10.71951219512195 70.50000000000001 z"
                                      fill="rgba(113,221,55,1)" fill-opacity="1" stroke-opacity="1"
                                      stroke-linecap="butt" stroke-width="5" stroke-dasharray="0"
                                      class="apexcharts-pie-area apexcharts-donut-slice-3" index="0" j="3"
                                      data:angle="90" data:startAngle="270" data:strokeWidth="5" data:value="50"
                                      data:pathOrig="M 10.71951219512195 70.50000000000001 A 59.78048780487805 59.78048780487805 0 0 1 70.48956633664653 10.719513105630845 L 70.4921747524849 25.664634829223125 A 44.835365853658544 44.835365853658544 0 0 0 25.664634146341456 70.5 L 10.71951219512195 70.50000000000001 z"
                                      stroke="#ffffff"></path>
                                  </g>
                                </g>
                              </g>
                              <g id="SvgjsG2864" class="apexcharts-datalabels-group"
                                transform="translate(0, 0) scale(1)">
                                <text id="SvgjsText2865" font-family="Helvetica, Arial, sans-serif" x="70.5" y="90.5"
                                  text-anchor="middle" dominant-baseline="auto" font-size="0.8125rem" font-weight="400"
                                  fill="#a1acb8" class="apexcharts-text apexcharts-datalabel-label"
                                  style="font-family: Helvetica, Arial, sans-serif;">Weekly</text><text
                                  id="SvgjsText2866" font-family="Public Sans" x="70.5" y="71.5" text-anchor="middle"
                                  dominant-baseline="auto" font-size="1.5rem" font-weight="400" fill="#566a7f"
                                  class="apexcharts-text apexcharts-datalabel-value"
                                  style="font-family: &quot;Public Sans&quot;;">38%</text>
                              </g>
                            </g>
                            <line id="SvgjsLine2867" x1="0" y1="0" x2="141" y2="0" stroke="#b6b6b6" stroke-dasharray="0"
                              stroke-width="1" stroke-linecap="butt" class="apexcharts-ycrosshairs"></line>
                            <line id="SvgjsLine2868" x1="0" y1="0" x2="141" y2="0" stroke-dasharray="0" stroke-width="0"
                              stroke-linecap="butt" class="apexcharts-ycrosshairs-hidden"></line>
                          </g>
                          <g id="SvgjsG2849" class="apexcharts-annotations"></g>
                        </svg>
                        <div class="apexcharts-legend"></div>
                        <div class="apexcharts-tooltip apexcharts-theme-dark">
                          <div class="apexcharts-tooltip-series-group" style="order: 1;"><span
                              class="apexcharts-tooltip-marker" style="background-color: rgb(105, 108, 255);"></span>
                            <div class="apexcharts-tooltip-text"
                              style="font-family: Helvetica, Arial, sans-serif; font-size: 12px;">
                              <div class="apexcharts-tooltip-y-group"><span
                                  class="apexcharts-tooltip-text-y-label"></span><span
                                  class="apexcharts-tooltip-text-y-value"></span></div>
                              <div class="apexcharts-tooltip-goals-group"><span
                                  class="apexcharts-tooltip-text-goals-label"></span><span
                                  class="apexcharts-tooltip-text-goals-value"></span></div>
                              <div class="apexcharts-tooltip-z-group"><span
                                  class="apexcharts-tooltip-text-z-label"></span><span
                                  class="apexcharts-tooltip-text-z-value"></span></div>
                            </div>
                          </div>
                          <div class="apexcharts-tooltip-series-group" style="order: 2;"><span
                              class="apexcharts-tooltip-marker" style="background-color: rgb(133, 146, 163);"></span>
                            <div class="apexcharts-tooltip-text"
                              style="font-family: Helvetica, Arial, sans-serif; font-size: 12px;">
                              <div class="apexcharts-tooltip-y-group"><span
                                  class="apexcharts-tooltip-text-y-label"></span><span
                                  class="apexcharts-tooltip-text-y-value"></span></div>
                              <div class="apexcharts-tooltip-goals-group"><span
                                  class="apexcharts-tooltip-text-goals-label"></span><span
                                  class="apexcharts-tooltip-text-goals-value"></span></div>
                              <div class="apexcharts-tooltip-z-group"><span
                                  class="apexcharts-tooltip-text-z-label"></span><span
                                  class="apexcharts-tooltip-text-z-value"></span></div>
                            </div>
                          </div>
                          <div class="apexcharts-tooltip-series-group" style="order: 3;"><span
                              class="apexcharts-tooltip-marker" style="background-color: rgb(3, 195, 236);"></span>
                            <div class="apexcharts-tooltip-text"
                              style="font-family: Helvetica, Arial, sans-serif; font-size: 12px;">
                              <div class="apexcharts-tooltip-y-group"><span
                                  class="apexcharts-tooltip-text-y-label"></span><span
                                  class="apexcharts-tooltip-text-y-value"></span></div>
                              <div class="apexcharts-tooltip-goals-group"><span
                                  class="apexcharts-tooltip-text-goals-label"></span><span
                                  class="apexcharts-tooltip-text-goals-value"></span></div>
                              <div class="apexcharts-tooltip-z-group"><span
                                  class="apexcharts-tooltip-text-z-label"></span><span
                                  class="apexcharts-tooltip-text-z-value"></span></div>
                            </div>
                          </div>
                          <div class="apexcharts-tooltip-series-group" style="order: 4;"><span
                              class="apexcharts-tooltip-marker" style="background-color: rgb(113, 221, 55);"></span>
                            <div class="apexcharts-tooltip-text"
                              style="font-family: Helvetica, Arial, sans-serif; font-size: 12px;">
                              <div class="apexcharts-tooltip-y-group"><span
                                  class="apexcharts-tooltip-text-y-label"></span><span
                                  class="apexcharts-tooltip-text-y-value"></span></div>
                              <div class="apexcharts-tooltip-goals-group"><span
                                  class="apexcharts-tooltip-text-goals-label"></span><span
                                  class="apexcharts-tooltip-text-goals-value"></span></div>
                              <div class="apexcharts-tooltip-z-group"><span
                                  class="apexcharts-tooltip-text-z-label"></span><span
                                  class="apexcharts-tooltip-text-z-value"></span></div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div> --}}
                     <div id="chartContainer" style="height: 300px; width: 100%;"><script src="https://cdn.canvasjs.com/canvasjs.min.js"></script></div>
                    <div class="resize-triggers">
                      <div class="expand-trigger">
                        <div style="width: 317px; height: 139px;"></div>
                      </div>
                      <div class="contract-trigger"></div>
                    </div>
                  </div>
                  <ul class="p-0 m-0">
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-primary"><i class="bx bx-mobile-alt"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Classified Waste</h6>
                        </div>
                        <div class="user-progress">
                          <small class="fw-semibold">{{classifiedCount}}</small>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-success"><i class="bx bx-image-alt"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Feedback Waste</h6>
                        </div>
                        <div class="user-progress">
                          <small class="fw-semibold">{{feedbackCount}}</small>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-info"><i class="bx bx-recycle"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Recyclable Waste</h6>
                        </div>
                        <div class="user-progress">
                          <small class="fw-semibold">{{wasteTypeCounts.recyclable_waste}}</small>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-info"><i class="bx bx-microchip"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Hazardous Waste</h6>
                        </div>
                        <div class="user-progress">
                          <small class="fw-semibold">{{wasteTypeCounts.hazardous_waste}}</small>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-info"><i class="bx bx-home-alt"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Household Waste</h6>
                        </div>
                        <div class="user-progress">
                          <small class="fw-semibold">{{wasteTypeCounts.household_waste}}</small>
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <!--/ Order Statistics -->

            

            <!-- Transactions -->
            <div class="col-md-6 col-lg-4 order-2 mb-4">
              <div class="card h-100">
                <div class="card-header d-flex align-items-center justify-content-between">
                  <h5 class="card-title m-0 me-2">New Transactions</h5>
                  <div class="dropdown">
                    <button class="btn p-0" type="button" id="transactionID" data-bs-toggle="dropdown"
                      aria-haspopup="true" aria-expanded="false">
                      <i class="bx bx-dots-vertical-rounded"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end" aria-labelledby="transactionID">
                      <a class="dropdown-item" href="javascript:void(0);">Last 28 Days</a>
                      <a class="dropdown-item" href="javascript:void(0);">Last Month</a>
                      <a class="dropdown-item" href="javascript:void(0);">Last Year</a>
                    </div>
                  </div>
                </div>
                <div class="card-body">
                  <ul class="p-0 m-0">
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <img src="../assets/img/icons/unicons/wallet.png" alt="User" class="rounded">
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <small class="text-muted d-block mb-1">Fee</small>
                          <h6 class="mb-0">Today Fee Collected</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{newTotalFee}}</h6>
                          <span class="text-muted">VND</span>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <img src="../assets/img/icons/unicons/chart.png" alt="User" class="rounded">
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <small class="text-muted d-block mb-1">Weigh</small>
                          <h6 class="mb-0">Today Weigh Collected</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{newTotalWeigh}}</h6>
                          <span class="text-muted">Kg</span>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <img src="../assets/img/icons/unicons/cc-success.png" alt="User" class="rounded">
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <small class="text-muted d-block mb-1">Transactions</small>
                          <h6 class="mb-0">Today Transactions</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{newTotalTransaction}}</h6>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-info"><i class="bx bx-recycle"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Recyclable Waste Collected</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{newWasteTypeWeights.recyclable_waste}}</h6>
                          <span class="text-muted">Kg</span>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-info"><i class="bx bx-home-alt"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Household Waste Collected</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{newWasteTypeWeights.household_waste}}</h6>
                          <span class="text-muted">Kg</span>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-info"><i class="bx bx-microchip"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Hazardous Waste Collected</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{newWasteTypeWeights.hazardous_waste}}</h6>
                          <span class="text-muted">Kg</span>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-info"><i class="bx bx-trash"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Organic Waste Collected</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{newWasteTypeWeights.organic_waste}}</h6>
                          <span class="text-muted">Kg</span>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-info"><i class="bx bx-beer"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Glass Waste Collected</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{newWasteTypeWeights.glass_waste}}</h6>
                          <span class="text-muted">Kg</span>
                        </div>
                      </div>
                    </li>
                  </ul>
                  
                </div>
              </div>
            </div>

            <!-- Transactions -->
            <div class="col-md-6 col-lg-4 order-2 mb-4">
              <div class="card h-100">
                <div class="card-header d-flex align-items-center justify-content-between">
                  <h5 class="card-title m-0 me-2">Transactions</h5>
                  <div class="dropdown">
                    <button class="btn p-0" type="button" id="transactionID" data-bs-toggle="dropdown"
                      aria-haspopup="true" aria-expanded="false">
                      <i class="bx bx-dots-vertical-rounded"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end" aria-labelledby="transactionID">
                      <a class="dropdown-item" href="javascript:void(0);">Last 28 Days</a>
                      <a class="dropdown-item" href="javascript:void(0);">Last Month</a>
                      <a class="dropdown-item" href="javascript:void(0);">Last Year</a>
                    </div>
                  </div>
                </div>
                <div class="card-body">
                  <ul class="p-0 m-0">
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <img src="../assets/img/icons/unicons/wallet.png" alt="User" class="rounded">
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <small class="text-muted d-block mb-1">Fee</small>
                          <h6 class="mb-0">Total Fee</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{totalFee}}</h6>
                          <span class="text-muted">VND</span>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <img src="../assets/img/icons/unicons/chart.png" alt="User" class="rounded">
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <small class="text-muted d-block mb-1">Weigh</small>
                          <h6 class="mb-0">Total Weigh</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{totalWeigh}}</h6>
                          <span class="text-muted">Kg</span>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <img src="../assets/img/icons/unicons/cc-success.png" alt="User" class="rounded">
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <small class="text-muted d-block mb-1">Transactions</small>
                          <h6 class="mb-0">Total Transactions</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{totalTransaction}}</h6>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-info"><i class="bx bx-recycle"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Recyclable Waste Collected</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{wasteTypeWeights.recyclable_waste}}</h6>
                          <span class="text-muted">Kg</span>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-info"><i class="bx bx-home-alt"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Household Waste Collected</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{wasteTypeWeights.household_waste}}</h6>
                          <span class="text-muted">Kg</span>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-info"><i class="bx bx-microchip"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Hazardous Waste Collected</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{wasteTypeWeights.hazardous_waste}}</h6>
                          <span class="text-muted">Kg</span>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-info"><i class="bx bx-trash"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Organic Waste Collected</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{wasteTypeWeights.organic_waste}}</h6>
                          <span class="text-muted">Kg</span>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex mb-4 pb-1">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-info"><i class="bx bx-beer"></i></span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Glass Waste Collected</h6>
                        </div>
                        <div class="user-progress d-flex align-items-center gap-1">
                          <h6 class="mb-0">+{{wasteTypeWeights.glass_waste}}</h6>
                          <span class="text-muted">Kg</span>
                        </div>
                      </div>
                    </li>
                  </ul>
                  
                </div>
              </div>
            </div>
            <!--/ Transactions -->
          </div>
          <div class="row">
            <div class="col-lg-12 mb-4 order-0">
              <div class="card">
                <div class="d-flex align-items-end row">
                  <div class="col-sm-4">
                    <div class="card-body">
                      <div id="newTransChartContainer" style="height: 370px; width: 100%;"></div>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="card-body">
                      <div id="lineChartContainer" style="height: 370px; width: 100%;"></div>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="card-body">
                        <div id="userChartContainer" style="height: 370px; width: 100%;"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- / Content -->
      </div>
    </div>
  </div>
</div>


<!-- partial -->

<!-- main-panel ends -->
{{>footer}}

<script>
window.onload = function () {
    // Lấy số lượng từ hai biến classifiedCount và feedbackCount
    var classifiedCount = {{classifiedCount}};
    var feedbackCount = {{feedbackCount}};
    
    // Tính tổng số lượng rác
    var totalCount = classifiedCount + feedbackCount;
    
    // Tính phần trăm của classified waste và feedback waste
    var classifiedPercentage = (classifiedCount / totalCount) * 100;
    var feedbackPercentage = (feedbackCount / totalCount) * 100;

    var chart = new CanvasJS.Chart("chartContainer", {
        theme: "light2",
        animationEnabled: true,
        subtitles: [{
            text: "Total Waste Uploaded: " + totalCount,
            fontSize: 18
        }],
        data: [{
            type: "pie",
            indexLabelFontSize: 16,
            radius: 80,
            indexLabel: "{label} - {y}",
            yValueFormatString: "###0.0\"%\"",
            click: explodePie,
            dataPoints: [
                { y: classifiedPercentage, label: "Classified Waste" },
                { y: feedbackPercentage, label: "Feedback Waste" }
            ]
        }]
    });
    chart.render();

    function explodePie(e) {
        for (var i = 0; i < e.dataSeries.dataPoints.length; i++) {
            if (i !== e.dataPointIndex)
                e.dataSeries.dataPoints[i].exploded = false;
        }
    }

    // Biểu đồ Line Chart
    var randomData = [{{day1}},{{day2}},{{day3}},{{day4}},{{day5}},{{day6}},{{day7}}];

    randomData.reverse();
    var dataPoints = [];
    var currentDate = new Date();
    currentDate.setDate(currentDate.getDate() - 1);
    for (var i = 0; i < randomData.length; i++) {
        dataPoints.push({ x: new Date(currentDate), y: randomData[i] });
        currentDate.setDate(currentDate.getDate() - 1);
    }
    dataPoints.reverse();
    var lineChart = new CanvasJS.Chart("lineChartContainer", {
        animationEnabled: true,
        subtitles: [{
            text: "Latest 7 Days Revenue",
            fontSize: 14,
            fontFamily: "Arial"
        }],
        axisX: {
            title: "Date",
            valueFormatString: "DD MMM",
            interval: 1
        },
        axisY: {
            title: "Revenue",
            valueFormatString: "#,### VND"
        },
        data: [{
            type: "spline",
            dataPoints: dataPoints
        }]
    });

    // Render biểu đồ
    lineChart.render();


    // Lấy số lượng từ hai biến classifiedCount và feedbackCount
    var hazardous_waste = {{newWasteTypeWeights.hazardous_waste}};
    var glass_waste = {{newWasteTypeWeights.glass_waste}};
    var household_waste = {{newWasteTypeWeights.household_waste}};
    var organic_waste = {{newWasteTypeWeights.organic_waste}};
    var recyclable_waste = {{newWasteTypeWeights.recyclable_waste}};
    
    // Tính tổng số lượng rác
    var totalCount = {{newTotalWeigh}};
    
    // Tính phần trăm của classified waste và feedback waste
    var hazardous_waste_per = (hazardous_waste / totalCount) * 100;
    var glass_waste_per = (glass_waste / totalCount) * 100;
    var household_waste_per = (household_waste / totalCount) * 100;
    var organic_waste_per = (organic_waste / totalCount) * 100;
    var recyclable_waste_per = (recyclable_waste / totalCount) * 100;

    var piechart = new CanvasJS.Chart("newTransChartContainer", {
        theme: "light2",
        animationEnabled: true,
        subtitles: [{
            text: "Today Waste Collected",
            fontSize: 14,
            fontFamily: "Arial"
        }],
        data: [{
            type: "pie",
            indexLabelFontSize: 16,
            radius: 80,
            indexLabel: "{label} - {y}",
            yValueFormatString: "###0.0\"%\"",
            click: explodePie,
            dataPoints: [
                { y: hazardous_waste_per, label: "Hazardous Waste" },
                { y: glass_waste_per, label: "Glass Waste" },
                { y: household_waste_per, label: "Household Waste" },
                { y: organic_waste_per, label: "Organic Waste" },
                { y: recyclable_waste_per, label: "Recyclable Waste" }
            ]
        }]
    });
    piechart.render();

    
    // Tạo biểu đồ user
    var userChart = new CanvasJS.Chart("userChartContainer", {
        animationEnabled: true,
        theme: "light2",
        subtitles: [{
            text: "New User Each Day",
            fontSize: 14,
            fontFamily: "Arial"
        }],
        axisX:{
            valueFormatString: "DD MMM",
            crosshair: {
                enabled: true,
                snapToDataPoint: true
            }
        },
        axisY: {
            title: "Number of users",
            includeZero: true,
            crosshair: {
                enabled: true
            }
        },
        toolTip:{
            shared:true
        },  
        legend:{
            cursor:"pointer",
            verticalAlign: "bottom",
            horizontalAlign: "left",
            dockInsidePlotArea: true,
            itemclick: toggleDataSeries
        },
        data: [{
            type: "line",
            showInLegend: true,
            name: "Person",
            markerType: "square",
            xValueFormatString: "DD MMM, YYYY",
            color: "#F08080",
            dataPoints: []
        },
        {
            type: "line",
            showInLegend: true,
            name: "Collector",
            lineDashType: "square",
            dataPoints: []
        }]
    });

    // Dữ liệu cho 7 ngày gần nhất
    var currentDate = new Date();
    var userChartData = [
        { date: new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() - 6), person: {{user1}}, collector: {{collector1}} },
        { date: new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() - 5), person: {{user2}}, collector: {{collector2}} },
        { date: new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() - 4), person: {{user3}}, collector: {{collector3}} },
        { date: new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() - 3), person: {{user4}}, collector: {{collector4}} },
        { date: new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() - 2), person: {{user5}}, collector: {{collector5}} },
        { date: new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() - 1), person: {{user6}}, collector: {{collector6}} },
        { date: new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate()), person: {{user7}}, collector: {{collector7}} }
    ];

    // Thêm dữ liệu vào biểu đồ
    for (var i = 0; i < userChartData.length; i++) {
        userChart.options.data[0].dataPoints.push({
            x: userChartData[i].date,
            y: userChartData[i].person
        });
        userChart.options.data[1].dataPoints.push({
            x: userChartData[i].date,
            y: userChartData[i].collector
        });
    }

    // Vẽ lại biểu đồ
    userChart.render();

    // Hàm xử lý khi người dùng chọn ẩn/hiện series trên biểu đồ
    function toggleDataSeries(e){
        if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
            e.dataSeries.visible = false;
        } else{
            e.dataSeries.visible = true;
        }
        userChart.render();
    }

}
</script>


